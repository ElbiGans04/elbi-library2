head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
    meta(name='description' content='')
    meta(name='author' content='')
    title Return The Book
    link(href='/assets/template/vendor/fontawesome-free/css/all.min.css' rel='stylesheet' type='text/css')
    link(href='https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i' rel='stylesheet')
    link(href='/assets/template/css/sb-admin-2.min.css' rel='stylesheet')
    link(href='/assets/template/vendor/datatables/dataTables.bootstrap4.min.css' rel='stylesheet')
    style.
        table {
            width: 100%;
        }
        table tr {
            display: flex;
            justify-content: space-between
        }
// Page Wrapper
#wrapper
    // Sidebar
    ul#accordionSidebar.navbar-nav.bg-gradient-primary.sidebar.sidebar-dark.accordion(navbarActive=active).disableButton
        // Sidebar - Brand
        a.sidebar-brand.d-flex.align-items-center.justify-content-center(href='index.html')
            .sidebar-brand-icon.rotate-n-15
                i.fas.fa-book-open
            .sidebar-brand-text.mx-3 Elbi Library
        // Divider
        hr.sidebar-divider.my-0
        // Nav Item - Dashboard
        li.nav-item(name="dashboard")
            a.nav-link(href='/')
                i.fas.fa-fw.fa-tachometer-alt
                span.ml-1 Dashboard
        // Divider
        hr.sidebar-divider
        // Heading
        .sidebar-heading Data
        li.nav-item(name="member")
            a.nav-link(href='/members')
                i.fas.fa-users
                span Member
        li.nav-item(name="book")
            a.nav-link(href='/books')
                i.fas.fa-book
                span Book
        li.active.nav-item(name="order")
            a.nav-link.collapsed(href='/order', data-toggle='collapse', data-target='#collapseUtilities', aria-expanded='true', aria-controls='collapseUtilities')
                i.fas.fa-shopping-cart
                span Order
            #collapseUtilities.collapse.show(aria-labelledby='headingUtilities', data-parent='#accordionSidebar')
                .bg-white.py-2.collapse-inner.rounded
                    h6.collapse-header rent or return books
                    a.collapse-item(href='/rent') Rent 
                    a.collapse-item.active(href='/rent/return') Return 
        // Divider
        hr.sidebar-divider.d-none.d-md-block
        // Sidebar Toggler (Sidebar)
        .text-center.d-none.d-md-inline
            button#sidebarToggle.rounded-circle.border-0
    // End of Sidebar
    // Content Wrapper
    #content-wrapper.d-flex.flex-column
        // Main Content
        #content
            // Topbar
            nav.navbar.navbar-expand.navbar-light.bg-white.topbar.mb-4.static-top.shadow
                // Sidebar Toggle (Topbar)
                button#sidebarToggleTop.btn.btn-link.d-md-none.rounded-circle.mr-3
                    i.fa.fa-bars
                // Topbar Search
                form.d-none.d-sm-inline-block.form-inline.mr-auto.ml-md-3.my-2.my-md-0.mw-100.navbar-search
                    .input-group
                        input.form-control.bg-light.border-0.small(type='text' placeholder='Search for...' aria-label='Search' aria-describedby='basic-addon2')
                        .input-group-append
                            button.btn.btn-primary(type='button')
                                i.fas.fa-search.fa-sm
                // Topbar Navbar
                ul.navbar-nav.ml-auto
                    // Nav Item - Search Dropdown (Visible Only XS)
                    li.nav-item.dropdown.no-arrow.d-sm-none
                        a#searchDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                            i.fas.fa-search.fa-fw
                        // Dropdown - Messages
                        .dropdown-menu.dropdown-menu-right.p-3.shadow.animated--grow-in(aria-labelledby='searchDropdown')
                            form.form-inline.mr-auto.w-100.navbar-search
                                .input-group
                                    input.form-control.bg-light.border-0.small(type='text' placeholder='Search for...' aria-label='Search' aria-describedby='basic-addon2')
                                    .input-group-append
                                        button.btn.btn-primary(type='button')
                                            i.fas.fa-search.fa-sm
                    // Nav Item - Alerts
                    li.nav-item.dropdown.no-arrow.mx-1
                        a#alertsDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                            i.fas.fa-bell.fa-fw
                            // Counter - Alerts
                            span.badge.badge-danger.badge-counter 3+
                        // Dropdown - Alerts
                        .dropdown-list.dropdown-menu.dropdown-menu-right.shadow.animated--grow-in(aria-labelledby='alertsDropdown')
                            h6.dropdown-header Alerts Center
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .mr-3
                                    .icon-circle.bg-primary
                                        i.fas.fa-file-alt.text-white
                                div
                                    .small.text-gray-500 December 12, 2019
                                    span.font-weight-bold A new monthly report is ready to download!
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .mr-3
                                    .icon-circle.bg-success
                                        i.fas.fa-donate.text-white
                                div
                                    .small.text-gray-500 December 7, 2019
                                    |                       $290.29 has been deposited into your account!
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .mr-3
                                    .icon-circle.bg-warning
                                        i.fas.fa-exclamation-triangle.text-white
                                div
                                    .small.text-gray-500 December 2, 2019
                                    |                       Spending Alert: We&apos;ve noticed unusually high spending for
                                    |                       your account.
                            a.dropdown-item.text-center.small.text-gray-500(href='#') Show All Alerts
                    // Nav Item - Messages
                    li.nav-item.dropdown.no-arrow.mx-1
                        a#messagesDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                            i.fas.fa-envelope.fa-fw
                            // Counter - Messages
                            span.badge.badge-danger.badge-counter 7
                        // Dropdown - Messages
                        .dropdown-list.dropdown-menu.dropdown-menu-right.shadow.animated--grow-in(aria-labelledby='messagesDropdown')
                            h6.dropdown-header Message Center
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .dropdown-list-image.mr-3
                                    img.rounded-circle(src='https://source.unsplash.com/fn_BT9fwg_E/60x60' alt='')
                                    .status-indicator.bg-success
                                .font-weight-bold
                                    .text-truncate
                                        | Hi there! I am wondering if you can help me with a
                                        | problem I&apos;ve been having.
                                    .small.text-gray-500 Emily Fowler &middot; 58m
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .dropdown-list-image.mr-3
                                    img.rounded-circle(src='https://source.unsplash.com/AU4VPcFN4LE/60x60' alt='')
                                    .status-indicator
                                div
                                    .text-truncate
                                        | I have the photos that you ordered last month, how would
                                        | you like them sent to you?
                                    .small.text-gray-500 Jae Chun &middot; 1d
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .dropdown-list-image.mr-3
                                    img.rounded-circle(src='https://source.unsplash.com/CS2uCrpNzJY/60x60' alt='')
                                    .status-indicator.bg-warning
                                div
                                    .text-truncate
                                        | Last month&apos;s report looks great, I am very happy with
                                        | the progress so far, keep up the good work!
                                    .small.text-gray-500 Morgan Alvarez &middot; 2d
                            a.dropdown-item.d-flex.align-items-center(href='#')
                                .dropdown-list-image.mr-3
                                    img.rounded-circle(src='https://source.unsplash.com/Mv9hjnEUHR4/60x60' alt='')
                                    .status-indicator.bg-success
                                div
                                    .text-truncate
                                        | Am I a good boy? The reason I ask is because someone
                                        | told me that people say this to all dogs, even if they
                                        | aren&apos;t good...
                                    .small.text-gray-500
                                        | Chicken the Dog &middot; 2w
                            a.dropdown-item.text-center.small.text-gray-500(href='#') Read More Messages
                    .topbar-divider.d-none.d-sm-block
                    // Nav Item - User Information
                    li.nav-item.dropdown.no-arrow
                        a#userDropdown.nav-link.dropdown-toggle(href='#' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false')
                            span.mr-2.d-none.d-lg-inline.text-gray-600.small Rhafael Bijaksana
                            img.img-profile.rounded-circle(src='https://source.unsplash.com/60x60')
                        // Dropdown - User Information
                        .dropdown-menu.dropdown-menu-right.shadow.animated--grow-in(aria-labelledby='userDropdown')
                            a.dropdown-item(href='#')
                                i.fas.fa-user.fa-sm.fa-fw.mr-2.text-gray-400
                                |                     Profile
                            a.dropdown-item(href='#')
                                i.fas.fa-cogs.fa-sm.fa-fw.mr-2.text-gray-400
                                |                     Settings
                            a.dropdown-item(href='#')
                                i.fas.fa-list.fa-sm.fa-fw.mr-2.text-gray-400
                                |                     Activity Log
                            .dropdown-divider
                            a.dropdown-item(href='/logout' data-toggle='modal' data-target='#logoutModal')
                                i.fas.fa-sign-out-alt.fa-sm.fa-fw.mr-2.text-gray-400
                                |                     Logout
            // End of Topbar
            // Begin Page Content
            .container-fluid 
              .row
                .col-sm-12
                    h3.mb-4.text-gray-800 Return The book
              .row
                if(dataOrder.length <= 0) 
                    h1.text-center No Transactions :)
                else
                  .col-sm-12
                    -let already = [];
                    - let active = '';
                        form()
                            .form-group
                                label Member: 
                                select.form-control(name="member")
                                    each rows in dataOrder
                                        - const title = rows.dataValues.member_id.title;
                                        if(hello(title, already))
                                            if(active.length == 0) 
                                                -active += title
                                            option(value=rows.dataValues.member_id.id)=title
                                            -already.push(title)
                            .form-group
                                label Book :
                                select.form-control(name="book")
                                    each rows in dataOrder
                                        - const title = rows.dataValues.book_id.title;
                                        if(rows.dataValues.member_id.title == active)
                                            option(value=rows.dataValues.book_id.id, data-transaction=rows.dataValues.id_transaction, data-price=rows.dataValues.order_price, data-day=rows.dataValues.order_day, data-fines=rows.dataValues.book_id.fines, data-date=rows.dataValues.order_date)=title
                                            -already.push(title)
                            .form-group
                                label Id Transaction
                                input.form-control(readonly="readonly", value=dataOrder[0].dataValues.id_transaction, name="id_transaction")

                        
                  .col-sm-12.mt-3
                    div.alert.alert-info#information(role="alert", style="width:100%").p-5
                        h4.mb-5
                          strong Information
                        -const rows = dataOrder[0].dataValues
                        table.mb-5
                            tr 
                                th Rental fee per day :
                                td.fee=rows.order_price
                            tr 
                                th Length of time :
                                td.feeDay !{rows.order_day} Day
                            - let {days} = moduleCustom.getTime(rows.order_date)
                            - days = days < 0 ? 0 : days;
                            - let denda = days * rows.book_id.fines
                            - let fee = rows.order_price * rows.order_day;
                            - let total = parseInt(fee) + parseInt(denda);
                            tr  
                                th how long it takes to return late :
                                td.finesDay !{days} Day
                            tr 
                                th fines per day :
                                td.fines=rows.book_id.fines
                            tr
                                th Fee + Fines :
                                td.feeFInes #{rows.order_price * rows.order_day} + #{denda}

                            tr
                                th total :
                                td.total
                                    strong.total.
                                        RP. !{total}
                                
                        button.btn-sm.btn.btn-primary#buttonAction.d-block Pay now
        - function hello(value, without) {
          -   for (let e in without) {
          -       if(without[e].toLowerCase() == value.toLowerCase()) {
          -           return false
          -       } 
          -   }
          -   return true
        - }

            // /.container-fluid
            // End of Main Content
            // Footer
            footer.sticky-footer.bg-white
                .container.my-auto
                    .copyright.text-center.my-auto
                        span
                            | Copyright &copy; By Elbi 2020 | made with love 
                            i.fas.fa-heart
            // End of Footer
            // End of Content Wrapper
// End of Page Wrapper
// Scroll to Top Button
a.scroll-to-top.rounded(href='#page-top')
    i.fas.fa-angle-up
// Logout Modal
#logoutModal.modal.fade(tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true')
    .modal-dialog(role='document')
        .modal-content
            .modal-header
                h5#exampleModalLabel.modal-title Ready to Leave?
                button.close(type='button' data-dismiss='modal' aria-label='Close')
                    span(aria-hidden='true') &times;
            .modal-body
                | Select &quot;Logout&quot; below if you are ready to end your current session.
            .modal-footer
                button.btn.btn-secondary(type='button' data-dismiss='modal')
                    | Cancel
                a.btn.btn-primary(href='login.html') Logout



// Script Dasar
script(src='/assets/template/vendor/jquery/jquery.min.js')
script(src='/assets/template/vendor/bootstrap/js/bootstrap.bundle.min.js')
script(src='/assets/template/vendor/jquery-easing/jquery.easing.min.js')
script(src='/assets/template/js/sb-admin-2.min.js')
script(src="/assets/template/vendor/datatables/jquery.dataTables.min.js")
script(src="/assets/template/vendor/datatables/dataTables.bootstrap4.min.js")
script(type="module", src="/assets/javascript/return.js")